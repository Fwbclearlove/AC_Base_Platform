(19)中华人民共和国国家知识产权局

(12)发明专利

(10)授权公告号 (45)授权公告日

(21)申请号 202110635760.X

(22)申请日 2021.06.08

(65)同一申请的已公布的文献号

申请公布号 CN 113378545 A

(43)申请公布日 2021.09.10

(73)专利权人 北京邮电大学

地址 100876 北京市海淀区西土城路10号

(72)发明人 李睿凡 林恩伟 陈昊 冯方向 张光卫 王小捷

(74)专利代理机构 北京柏杉松知识产权代理事

务所(普通合伙) 11413 代理人 丁芸 赵元

(51)Int.Cl.

G06F 40/211(2020.01) G06F 40/242(2020.01) G06F 40/253(2020.01) G06N 3/04(2006.01) G06N 3/08(2006.01)

(56)对比文件

CN 111858945 A,2020.10.30

CN 110134934 A,2019.08.16 CN 111985205 A,2020.11.24 CN 112001187 A,2020.11.27 CN 112417157 A,2021.02.26 CN 112861522 A,2021.05.28 US 2019095515 A1,2019.03.28 US 2018341839 A1,2018.11.29 CN 111581966 A,2020.08.25 CN 111814450 A,2020.10.23 CN 112528672 A,2021.03.19 CN 108614875 A,2018.10.02 李睿凡 等.全卷积神经结构的段落式图像 描述算法.《北京邮电大学学报》.2019,第42卷 (第6期) ,

郗晓琴.基于深度学习的情感分析与个性化 推荐研究.《中国优秀博硕士学位论文全文数据 库(硕士)信息科技辑》.2021,(第01期) ,

何丽 等.基于上下文保持能力的方面级情 感分类模型.《模式识别与人工智能》.2021,第34 卷(第2期) , (续)

审查员 熊钟铭

(54)发明名称

一种方面级情感分析方法、装置、电子设备 及存储介质 (57)摘要

本发明实施例提供了一种方面级情感分析 方法、装置、电子设备及存储介质，所述方法包 括：获取待进行方面级情感分析的目标句子，以 及该目标句子中的方面词；基于相似结构数据 集，对目标句子以及方面词进行聚合特征处理， 得到目标句子对应的融合特征信息；利用双向长 短期记忆网络，对融合特征信息进行特征转换， 得到目标句子对应的隐藏状态特征；对目标句子 以及方面词进行预处理，得到目标句子对应的依 赖关系图，以及该目标句子中各个词对应的位置 编码特征；将隐藏状态特征、依赖关系图以及位 置编码特征，输入预先训练好的图卷积神经网络

中，得到方面词对应的情感分析结果。本发明实 施例，能够提高情感分析结果的准确性。

权利要求书3页 说明书16页 附图5页

CN 113378545 B 2022.02.11

CN 113378545 B

(56)对比文件

Yuan D. 等.Sentiment Analysis of Microblog Combining Dictionary and Rules. 《2014 IEEE/ACM International Conference

on Advances in Social Networks Analysis and Mining (ASONAM 2014)》.2014,

Xingwei Tan 等.Recognizing conflict

opinions in aspect-level sentiment classification with dual attention networks.《Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing (EMNLP-IJCNLP)》.2019,

CN 113378545 B

1.一种方面级情感分析方法，其特征在于，所述方法包括： 获取待进行方面级情感分析的目标句子，以及该目标句子中的方面词； 基于相似结构数据集，对所述目标句子以及所述方面词进行聚合特征处理，得到所述 目标句子对应的融合特征信息；其中，所述相似结构数据集是预先对第一预设数据集中各 句子进行相似度计算得到的，包含具有不同相似结构的数据子集；

利用双向长短期记忆网络，对所述融合特征信息进行特征转换，得到所述目标句子对 应的隐藏状态特征；

对所述目标句子以及所述方面词进行预处理，得到所述目标句子对应的依赖关系图， 以及该目标句子中各个词对应的位置编码特征；其中，所述依赖关系图用于表征所述目标

句子中各个词之间的依赖关系，所述位置编码特征是：根据所述目标句子中各个词对应的 相对位置编码特征和绝对位置编码特征确定的；

将所述隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好的图卷积神经 网络中，得到所述方面词对应的情感分析结果；其中，所述预先训练好的图卷积神经网络是 根据样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个词对应 的位置编码特征，以及样本句子中方面词对应的真值情感分析结果训练得到的，所述真值 情感分析结果包括：正向结果、中性结果以及负向结果；

其中，所述对所述目标句子以及所述方面词进行预处理，得到所述目标句子对应的依 赖关系图，以及该目标句子中各个词对应的位置编码特征，包括：

将所述目标句子以及所述方面词，输入预先训练的依存句法分析器中，得到所述目标 句子对应的句法依存树，以及所述目标句子中各个词对应的相对位置编码特征；所述预先 训练的依存句法分析器是根据第二预设数据集训练得到的；

基于所述句法依存树，生成所述目标句子对应的依赖关系图； 对所述目标句子中各个词对应的相对位置编码特征和绝对位置编码特征进行位置编 码融合，得到所述目标句子中各个词对应的位置编码特征。

2.根据权利要求1所述的方法，其特征在于，所述基于相似结构数据集，对所述目标句 子以及所述方面词进行聚合特征处理，得到所述目标句子对应的融合特征信息，包括：

从所述相似结构数据集中，获取与所述目标句子具有相似结构特征信息的数据子集； 将所述数据子集中各句子，与所述目标句子以及所述方面词进行聚合特征处理，得到 目标句子对应的融合特征信息。

3.根据权利要求1所述的方法，其特征在于，所述将所述隐藏状态特征、依赖关系图以 及位置编码特征，输入预先训练好的图卷积神经网络中，得到所述方面词对应的情感分析 结果，包括：

基于所述隐藏状态特征、依赖关系图以及位置编码特征，利用所述预先训练好的图卷 积神经网络的卷积层进行特征提取，得到所述目标句子对应的特征信息；

利用所述预先训练好的图卷积神经网络中的池化层，对所述目标句子对应的特征信息 进行池化处理，得到第一池化特征；

利用所述预先训练好的图卷积神经网络中的全连接层，对所述第一池化特征进行概率 分析，得到所述方面词对应的情感分析结果。

4.根据权利要求1‑3任一所述的方法，其特征在于，所述图卷积神经网络的训练过程，

权 利 要 求 书 1/3 页

CN 113378545 B

构建初始图卷积神经网络模型，所述初始图卷积神经网络模型包括：卷积层，池化层和 全连接层；

将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个词对 应的位置编码特征，输入所述图卷积神经网络的卷积层进行特征提取，得到样本句子对应 的特征信息；

将所述样本句子对应的特征信息输入池化层，进行池化处理，得到第二池化特征； 将所述第二池化特征输入全连接层，得到样本句子中方面词对应的情感分析结果； 基于所述样本句子中方面词对应的情感分析结果与真值情感分析结果的差异，计算所 述初始图卷积神经网络模型对应损失函数的参数值；

对所述损失函数进行最小化处理，确定所述初始图卷积神经网络模型中各模块的权重 参数；

基于所述初始图卷积神经网络模型中各模块的权重参数，对所述初始图卷积神经网络 模型中的参数进行更新，训练得到所述图卷积神经网络模型。

5.根据权利要求4所述的方法，其特征在于，所述图卷积神经网络包含N层，N为大于1的 整数；

在得到样本句子对应的特征信息之后，还包括： 利用所述样本句子对应的隐藏状态特征，对所述样本句子对应的特征信息进行更新， 并执行将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个词 对应的位置编码特征，输入所述图卷积神经网络的卷积层进行特征提取，得到样本句子对 应的特征信息的步骤。

6.根据权利要求4所述的方法，其特征在于，所述损失函数的表达式为：

其中，L表示损失函数，c表示情感分析类别，X表示情感分析类别的数据，yic表示一个指 示变量，pic表示样本句子中方面词i的情感分析结果属于类别c的概率。

7.一种方面级情感分析装置，其特征在于，所述装置包括： 数据获取模块，用于获取待进行方面级情感分析的目标句子，以及该目标句子中的方 面词；

聚合特征模块，用于基于相似结构数据集，对所述目标句子以及所述方面词进行聚合 特征处理，得到所述目标句子对应的融合特征信息；其中，所述相似结构数据集是预先对第 一预设数据集中各句子进行相似度计算得到的，包含具有不同相似结构的数据子集；

特征转换模块，用于利用双向长短期记忆网络，对所述融合特征信息进行特征转换，得 到所述目标句子对应的隐藏状态特征；

位置编码模块，用于对所述目标句子以及所述方面词进行预处理，得到所述目标句子 对应的依赖关系图，以及该目标句子中各个词对应的位置编码特征；其中，所述依赖关系图 用于表征所述目标句子中各个词之间的依赖关系，所述位置编码特征是：根据所述目标句 子中各个词对应的相对位置编码特征和绝对位置编码特征确定的；

权 利 要 求 书 2/3 页

CN 113378545 B

情感分析模块，用于将所述隐藏状态特征、依赖关系图以及位置编码特征，输入预先训 练好的图卷积神经网络中，得到所述方面词对应的情感分析结果；其中，所述预先训练好的 图卷积神经网络是根据样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本

句子中各个词对应的位置编码特征，以及样本句子中方面词对应的真值情感分析结果训练 得到的，所述真值情感分析结果包括：正向结果、中性结果以及负向结果；

其中，所述位置编码模块，具体用于： 将所述目标句子以及所述方面词，输入预先训练的依存句法分析器中，得到所述目标 句子对应的句法依存树，以及所述目标句子中各个词对应的相对位置编码特征；所述预先 训练的依存句法分析器是根据第二预设数据集训练得到的；

基于所述句法依存树，生成所述目标句子对应的依赖关系图； 对所述目标句子中各个词对应的相对位置编码特征和绝对位置编码特征进行位置编 码融合，得到所述目标句子中各个词对应的位置编码特征。

8.一种电子设备，其特征在于，包括处理器、通信接口、存储器和通信总线，其中，处理 器，通信接口，存储器通过通信总线完成相互间的通信；

存储器，用于存放计算机程序； 处理器，用于执行存储器上所存放的程序时，实现权利要求1‑6任一所述的方法步骤。 9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质内存储有计算机 程序，所述计算机程序被处理器执行时实现权利要求1‑6任一所述的方法步骤。

权 利 要 求 书 3/3 页

CN 113378545 B

一种方面级情感分析方法、装置、电子设备及存储介质

[0001] 本发明涉及自然语言处理技术领域，特别是涉及一种方面级情感分析方法、装置、 电子设备及存储介质。

[0002] ABSA(Aspect Based Sentiment Analysis，方面级情感分析)是情感分析的一类 任务，属于细粒度的情感分析。其主要是通过分析文本中对指定方面的描述，来识别评论主 体对该方面的情感倾向。例如，如图1所示，针对文本中的句子：The food is good，but it certainly isn’t a relaxing place to go，其中， “good”这一情感词表示文本对“food” 这一实体有着正面(Positive)的情感倾向，而“isn’t a relaxing place”则暗含了对 Atmosphere(环境)这个方面的情感倾向是负面(Negative)的。

[0003] 现有方面级情感分析使用的方法是：针对待进行方面级情感分析的句子，在该句 子中包含多个方面词的情况下，将该待进行方面级情感分析的句子拆分成多个子句，每一 子句对应包含一个方面词，进而利用情感词典判断关于主体的指定方面对应的情感倾向。

[0004] 然而，发明人发现，现有利用情感词典判断关于主体的指定方面对应的情感倾向 的方法，对情感词典的依赖性较强，而情感词典是人工粗粒度统计的结果，准确性不高，进 而使得利用情感词典判断关于主体的指定方面对应的情感倾向结果分析不准确。

[0005] 本发明实施例的目的在于提供一种方面级情感分析方法、装置、电子设备及存储 介质，以提高情感分析结果的准确性。具体技术方案如下：

[0006] 第一方面，本发明实施例提供了一种方面级情感分析方法，所述方法包括：

[0007] 获取待进行方面级情感分析的目标句子，以及该目标句子中的方面词；

[0008] 基于相似结构数据集，对所述目标句子以及所述方面词进行聚合特征处理，得到 所述目标句子对应的融合特征信息；其中，所述相似结构数据集是预先对第一预设数据集 中各句子进行相似度计算得到的，包含具有不同相似结构的数据子集；

[0009] 利用双向长短期记忆网络，对所述融合特征信息进行特征转换，得到所述目标句 子对应的隐藏状态特征；

[0010] 对所述目标句子以及所述方面词进行预处理，得到所述目标句子对应的依赖关系 图，以及该目标句子中各个词对应的位置编码特征；其中，所述依赖关系图用于表征所述目 标句子中各个词之间的依赖关系，所述位置编码特征是：根据所述目标句子中各个词对应 的相对位置编码特征和绝对位置编码特征确定的；

[0011] 将所述隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好的图卷积 神经网络中，得到所述方面词对应的情感分析结果；其中，所述预先训练好的图卷积神经网 络是根据样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个词 对应的位置编码特征，以及样本句子中方面词对应的真值情感分析结果训练得到的，所述

说 明 书 1/16 页

CN 113378545 B

真值情感分析结果包括：正向结果、中性结果以及负向结果。

[0012] 可选地，所述基于相似结构数据集，对所述目标句子以及所述方面词进行聚合特 征处理，得到所述目标句子对应的融合特征信息，包括：

[0013] 从所述相似结构数据集中，获取与所述目标句子具有相似结构特征信息的数据子 集；

[0014] 将所述数据子集中各句子，与所述目标句子以及所述方面词进行聚合特征处理， 得到目标句子对应的融合特征信息。

[0015] 可选地，所述对所述目标句子以及所述方面词进行预处理，得到所述目标句子对 应的依赖关系图，以及该目标句子中各个词对应的位置编码特征，包括：

[0016] 将所述目标句子以及所述方面词，输入预先训练的依存句法分析器中，得到所述 目标句子对应的句法依存树，以及所述目标句子中各个词对应的相对位置编码特征；所述 预先训练的依存句法分析器是根据第二预设数据集训练得到的；

[0017] 基于所述句法依存树，生成所述目标句子对应的依赖关系图；

[0018] 对所述目标句子中各个词对应的相对位置编码特征和绝对位置编码特征进行位 置编码融合，得到所述目标句子中各个词对应的位置编码特征。

[0019] 可选地，所述将所述隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练 好的图卷积神经网络中，得到所述方面词对应的情感分析结果，包括：

[0020] 基于所述隐藏状态特征、依赖关系图以及位置编码特征，利用所述预先训练好的 图卷积神经网络的卷积层进行特征提取，得到所述目标句子对应的特征信息；

[0021] 利用所述预先训练好的图卷积神经网络中的池化层，对所述目标句子对应的特征 信息进行池化处理，得到第一池化特征；

[0022] 利用所述预先训练好的图卷积神经网络中的全连接层，对所述第一池化特征进行 概率分析，得到所述方面词对应的情感分析结果。

[0023] 可选地，所述图卷积神经网络的训练过程，包括：

[0024] 构建初始图卷积神经网络模型，所述初始图卷积神经网络模型包括：卷积层，池化 层和全连接层；

[0025] 将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个 词对应的位置编码特征，输入所述图卷积神经网络的卷积层进行特征提取，得到样本句子 对应的特征信息；

[0026] 将所述样本句子对应的特征信息输入池化层，进行池化处理，得到第二池化特征；

[0027] 将所述第二池化特征输入全连接层，得到样本句子中方面词对应的情感分析结 果；

[0028] 基于所述样本句子中方面词对应的情感分析结果与真值情感分析结果的差异，计 算所述初始图卷积神经网络模型对应损失函数的参数值；

[0029] 对所述损失函数进行最小化处理，确定所述初始图卷积神经网络模型中各模块的 权重参数；

[0030] 基于所述初始图卷积神经网络模型中各模块的权重参数，对所述初始图卷积神经 网络模型中的参数进行更新，训练得到所述图卷积神经网络模型。

[0031] 可选地，所述图卷积神经网络包含N层，N为大于1的整数；

说 明 书 2/16 页

CN 113378545 B

[0032] 在得到样本句子对应的特征信息之后，还包括：

[0033] 利用所述样本句子对应的隐藏状态特征，对所述样本句子对应的特征信息进行更 新，并执行将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个 词对应的位置编码特征，输入所述图卷积神经网络的卷积层进行特征提取，得到样本句子 对应的特征信息的步骤。

[0034] 可选地，所述损失函数的表达式为：

[0035]

[0036] 其中，L表示损失函数，c表示情感分析类别，X表示情感分析类别的数据，yic表示一 个指示变量，pic表示样本句子中方面词i的情感分析结果属于类别c的概率。

[0037] 第二方面，本发明实施例提供了一种方面级情感分析装置，所述装置包括：

[0038] 数据获取模块，用于获取待进行方面级情感分析的目标句子，以及该目标句子中 的方面词；

[0039] 聚合特征模块，用于基于相似结构数据集，对所述目标句子以及所述方面词进行 聚合特征处理，得到所述目标句子对应的融合特征信息；其中，所述相似结构数据集是预先 对第一预设数据集中各句子进行相似度计算得到的，包含具有不同相似结构的数据子集；

[0040] 特征转换模块，用于利用双向长短期记忆网络，对所述融合特征信息进行特征转 换，得到所述目标句子对应的隐藏状态特征；

[0041] 位置编码模块，用于对所述目标句子以及所述方面词进行预处理，得到所述目标 句子对应的依赖关系图，以及该目标句子中各个词对应的位置编码特征；其中，所述依赖关 系图用于表征所述目标句子中各个词之间的依赖关系，所述位置编码特征是：根据所述目 标句子中各个词对应的相对位置编码特征和绝对位置编码特征确定的；

[0042] 情感分析模块，用于将所述隐藏状态特征、依赖关系图以及位置编码特征，输入预 先训练好的图卷积神经网络中，得到所述方面词对应的情感分析结果；其中，所述预先训练 好的图卷积神经网络是根据样本句子对应的隐藏状态特征，样本句子对应的依赖关系图， 样本句子中各个词对应的位置编码特征，以及样本句子中方面词对应的真值情感分析结果 训练得到的，所述真值情感分析结果包括：正向结果、中性结果以及负向结果。

[0043] 可选地，所述聚合特征模块，具体用于：

[0044] 从所述相似结构数据集中，获取与所述目标句子具有相似结构特征信息的数据子 集；

[0045] 将所述数据子集中各句子，与所述目标句子以及所述方面词进行聚合特征处理， 得到目标句子对应的融合特征信息。

[0046] 可选地，所述位置编码模块，具体用于：

[0047] 将所述目标句子以及所述方面词，输入预先训练的依存句法分析器中，得到所述 目标句子对应的句法依存树，以及所述目标句子中各个词对应的相对位置编码特征；所述 预先训练的依存句法分析器是根据第二预设数据集训练得到的；

[0048] 基于所述句法依存树，生成所述目标句子对应的依赖关系图；

[0049] 对所述目标句子中各个词对应的相对位置编码特征和绝对位置编码特征进行位

说 明 书 3/16 页

CN 113378545 B

置编码融合，得到所述目标句子中各个词对应的位置编码特征。

[0050] 可选地，所述情感分析模块，具体用于：

[0051] 基于所述隐藏状态特征、依赖关系图以及位置编码特征，利用所述预先训练好的 图卷积神经网络的卷积层进行特征提取，得到所述目标句子对应的特征信息；

[0052] 利用所述预先训练好的图卷积神经网络中的池化层，对所述目标句子对应的特征 信息进行池化处理，得到第一池化特征；

[0053] 利用所述预先训练好的图卷积神经网络中的全连接层，对所述第一池化特征进行 概率分析，得到所述方面词对应的情感分析结果。

[0054] 可选地，所述装置，还包括：

[0055] 构建模块，用于构建初始图卷积神经网络模型，所述初始图卷积神经网络模型包 括：卷积层，池化层和全连接层；

[0056] 第一特征提取模块，用于将样本句子对应的隐藏状态特征，样本句子对应的依赖 关系图，样本句子中各个词对应的位置编码特征，输入所述图卷积神经网络的卷积层进行 特征提取，得到样本句子对应的特征信息；

[0057] 第二特征提取模块，用于将所述样本句子对应的特征信息输入池化层，进行池化 处理，得到第二池化特征；

[0058] 分析模块，用于将所述第二池化特征输入全连接层，得到样本句子中方面词对应 的情感分析结果；

[0059] 计算模块，用于基于所述样本句子中方面词对应的情感分析结果与真值情感分析 结果的差异，计算所述初始图卷积神经网络模型对应损失函数的参数值；

[0060] 确定模块，用于对所述损失函数进行最小化处理，确定所述初始图卷积神经网络 模型中各模块的权重参数；

[0061] 训练模块，用于基于所述初始图卷积神经网络模型中各模块的权重参数，对所述 初始图卷积神经网络模型中的参数进行更新，训练得到所述图卷积神经网络模型。

[0062] 可选地，所述图卷积神经网络包含N层，N为大于1的整数；所述装置还包括：

[0063] 更新模块，用于利用所述样本句子对应的隐藏状态特征，对所述样本句子对应的 特征信息进行更新，并触发第一特征提取模块执行将样本句子对应的隐藏状态特征，样本 句子对应的依赖关系图，样本句子中各个词对应的位置编码特征，输入所述图卷积神经网 络的卷积层进行特征提取，得到样本句子对应的特征信息。

[0064] 可选地，所述损失函数的表达式为：

[0065]

[0066] 其中，L表示损失函数，c表示情感分析类别，X表示情感分析类别的数据，yic表示一 个指示变量，pic表示样本句子中方面词i的情感分析结果属于类别c的概率。

[0067] 第三方面，本发明实施例提供了一种电子设备，包括处理器、通信接口、存储器和 通信总线，其中，处理器，通信接口，存储器通过通信总线完成相互间的通信；

[0068] 存储器，用于存放计算机程序；

[0069] 处理器，用于执行存储器上所存放的程序时，实现上述第一方面所述的方法步骤。

说 明 书 4/16 页

CN 113378545 B

[0070] 第四方面，本发明实施例提供了一种计算机可读存储介质，所述计算机可读存储 介质内存储有计算机程序，所述计算机程序被处理器执行时实现实现上述第一方面所述的 方法步骤。

[0071] 本发明实施例有益效果：

[0072] 本发明实施例提供的一种方面级情感分析方法、装置、电子设备及存储介质，可以 基于相似结构数据集，将与待进行方面级情感分析的目标句子具有相似结构特征信息对应 句子的信息，和目标句子以及方面词进行特征聚合，得到目标句子对应的融合特征信息，以 及得到根据目标句子中各个词对应的相对位置编码特征和绝对位置编码特征所确定的位 置编码特征，进一步基于目标句子对应的隐藏状态特征、依赖关系图以及位置编码特征，利 用预先训练好的图卷积神经网络中，得到方面词对应的情感分析结果，避免了对情感词典 依赖性较强而导致的情感分析结果不准确的问题。且，在情感分析的过程中，不仅考虑待进 行方面级情感分析的目标句子的特征，以及目标句子中各个词对应的绝对位置编码特征， 还考虑了具有相似结构特征信息对应句子的信息以及目标句子中各个词对应的相对位置 编码特征，使得融合特征能够更准确的表征方面词在句子中的信息，进而提高了情感分析 结果的准确性。

[0073] 当然，实施本发明的任一产品或方法并不一定需要同时达到以上所述的所有优 点。

[0074] 为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现 有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本 发明的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的实施 例。

[0075] 图1为一种对文本中方面词分析的结构示意图；

[0076] 图2为本发明实施例提供的一种方面级情感分析方法的流程示意图；

[0077] 图3为本发明实施例提供的一种聚合特征的实施方式流程示意图；

[0078] 图4为本发明实施例提供的一种对目标句子和方面词进行预处理的实施方式流程 示意图；

[0079] 图5为本发明实施例提供的一种获得方面词情感分析结果的实施方式流程示意 图；

[0080] 图6为本发明实施例提供的一种图卷积神经网络模型示意图；

[0081] 图7为本发明实施例提供的一种图卷积神经网络模型训练实施方式流程示意图；

[0082] 图8为本发明实施例提供的一种方面级情感分析装置的结构示意图；

[0083] 图9为本发明实施例提供的一种电子设备的结构示意图。

具体实施方式

[0084] 下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完 整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于 本发明中的实施例，本领域普通技术人员基于本申请所获得的所有其他实施例，都属于本

说 明 书 5/16 页

CN 113378545 B

发明保护的范围。

[0085] 为了解决现有利用情感词典判断关于主体的指定方面对应的情感倾向结果分析 不准确的问题，本发明实施例提供了一种方面级情感分析方法，该方法包括：

[0086] 获取待进行方面级情感分析的目标句子，以及该目标句子中的方面词；基于相似 结构数据集，对所述目标句子以及所述方面词进行聚合特征处理，得到所述目标句子对应 的融合特征信息；其中，所述相似结构数据集是预先对第一预设数据集中各句子进行相似 度计算得到的，包含具有不同相似结构的数据子集；利用双向长短期记忆网络，对所述融合 特征信息进行特征转换，得到所述目标句子对应的隐藏状态特征；对所述目标句子以及所 述方面词进行预处理，得到所述目标句子对应的依赖关系图，以及该目标句子中各个词对 应的位置编码特征；其中，所述依赖关系图用于表征所述目标句子中各个词之间的依赖关 系，所述位置编码特征是：根据所述目标句子中各个词对应的相对位置编码特征和绝对位 置编码特征确定的；将所述隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好 的图卷积神经网络中，得到所述方面词对应的情感分析结果；其中，所述预先训练好的图卷 积神经网络是根据样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子 中各个词对应的位置编码特征，以及样本句子中方面词对应的真值情感分析结果训练得到 的，所述真值情感分析结果包括：正向结果、中性结果以及负向结果。

[0087] 本发明实施例提供的一种方面级情感分析方法，可以基于相似结构数据集，将与 待进行方面级情感分析的目标句子具有相似结构特征信息对应句子的信息，和目标句子以 及方面词进行特征聚合，得到目标句子对应的融合特征信息，以及得到根据目标句子中各 个词对应的相对位置编码特征和绝对位置编码特征所确定的位置编码特征，进一步基于目 标句子对应的隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图卷积神 经网络中，得到方面词对应的情感分析结果，避免了对情感词典依赖性较强而导致的情感 分析结果不准确的问题。且，在情感分析的过程中，不仅考虑待进行方面级情感分析的目标 句子的特征，以及目标句子中各个词对应的绝对位置编码特征，还考虑了具有相似结构特 征信息对应句子的信息以及目标句子中各个词对应的相对位置编码特征，使得融合特征能 够更准确的表征方面词在句子中的信息，进而提高了情感分析结果的准确性。

[0088] 首先，对图卷积神经网络进行介绍，GCN(Graph Convolutional Network，图卷积 神经网络)受传统的CNN(Convolutional Neural Network，卷积神经网络)和图嵌入的启 发，GCN是CNN的一种有效的变体，且可以直接在图上进行操作。GCN可以在直接连接的节点 上使用卷积操作，编码局部信息，通过多层的GCN消息传递，图中的每个节点可以学习更多 的全局信息。

[0089] 例如，GCN网络在数学上可以描述为：对于图G＝(V,E)，V表示图中的节点，E表示图 中各节点之间的边，GCN的输入为一个T×D维的矩阵和一个表征节点关系的T×T维邻接矩 阵，T表示节点数，D表示每一节点的特征维度，期望学习到一个函数f，该函数f可以输出一 个包含节点特征的T×M维的矩阵，M表示GCN最后一层中每一节点的特征维度，对于函数f可 以定义为：

[0090] f(H(l) ,A)＝δ[B‑1/2(A+I)B‑1/2H(l)W(l)]

[0091] 其中，H(l)表示第l层节点的矩阵表示，A表示关系邻接矩阵，δ表示激活函数，I表示 节点自身到自身的连接信息，W(l)表示第l层节点的权重系数矩阵，B表示归一化系数矩阵。

说 明 书 6/16 页

CN 113378545 B

[0092] 下面进行具体说明，参见图2，图2为本发明实施例提供的一种方面级情感分析方 法的流程示意图，该方法可以包括：

[0093] S101，获取待进行方面级情感分析的目标句子，以及该目标句子中的方面词。

[0094] 本发明实施例方面级情感分析方法可以通过电子设备实现，具体的，该电子设备 可以为个人电脑或服务器等。

[0095] 在需要对句子进行方面级情感分析时，可以获取待进行方面级情感分析的目标句 子，以及该目标句子中的方面词，其中，方面词可以是描述一个实体的不同属性或方面的单 词或词语。例如，关于餐饮行业的一条评论：The food is good，but it certainly isn’t a relaxing place to go，食物很好，但是肯定不是一个放松的地方，在该条评论中包含两 个方面词：food和place，对应的观点词分别为good和isn’t relaxing等。

[0096] 示例性的，获取的待进行方面情感分析的目标句子，以及该目标句子中的方面词 可以表示为：(a,s)，(a,s)即方面词句子对，其中，a表示目标句子s中的方面词，方面词的集 合可以表示为：a＝{a1,a2,...,am}，a是目标句子s＝{w1,w2,...,wn}的子序列，am表示句子s 中的第m个方面词，wn表示目标句子s中的第n个词。

[0097] S102，基于相似结构数据集，对目标句子以及方面词进行聚合特征处理，得到目标 句子对应的融合特征信息。

[0098] 其中，相似结构数据集是预先对第一预设数据集中各句子进行相似度计算得到 的，包含具有不同相似结构的数据子集。示例性的，该第一预设数据集可以是已有公开的数 据集，具体的本发明实施例不作限定。

[0099] 作为本发明实施例一种可选的实施方式，基于第一预设数据集得到相似结构数据 集的过程可以包括：获取第一预设数据集中的句子，进而计算各句子之间的相似度，进一步 基于预设阈值，将相似度在预设阈值范围的句子进行聚类，得到不同的具有相似结构的数 据子集，所有的数据子集构成了相似结构数据集。该预设阈值本领域技术人员可根据实际 需求进行设置。

[0100] 本发明实施例中，可以从预先对第一预设数据集中各句子进行相似度计算得到的 相似结构数据集中，选取与目标句子具有相似结构的数据子集，进而利用所选取数据子集 中的句子信息，对目标句子以及方面词进行聚合特征处理，得到目标句子对应的融合特征 信息，使得融合特征信息中聚合了与目标句子具有相似结构的句子的信息，而不仅仅只考 虑目标句子的信息。

[0101] S103，利用双向长短期记忆网络，对融合特征信息进行特征转换，得到目标句子对 应的隐藏状态特征。

[0102] 在得到目标句子对应的融合特征信息之后，可以将融合特征信息输入双向长短期 记忆网络中进行特征的转换，进而得到目标句子对应的隐藏状态特征。示例性的，所得到的 目标句子对应的隐藏状态特征所对应的序列可以表示为{h1,h2,...,hn}，hn表示第n个词所 对应的隐藏状态特征表示。

[0103] S104，对目标句子以及方面词进行预处理，得到目标句子对应的依赖关系图，以及 该目标句子中各个词对应的位置编码特征。

[0104] 其中，依赖关系图用于表征目标句子中各个词之间的依赖关系，位置编码特征是： 根据目标句子中各个词对应的相对位置编码特征和绝对位置编码特征确定的，位置编码特

说 明 书 7/16 页

CN 113378545 B

征表征了目标句子中各个词对应的位置信息。

[0105] 具体的，对目标句子以及方面词进行预处理，得到目标句子对应的依赖关系图，以 及该目标句子中各个词对应的位置编码特征的实施方式在下文详细介绍。

[0106] S105，将隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好的图卷积 神经网络中，得到方面词对应的情感分析结果。

[0107] 在得到目标句子对应的隐藏状态特征、依赖关系图以及位置编码特征之后，可以 将隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好的图卷积神经网络中进 行方面词的情感分析，得到方面词对应的情感分析结果，该方面词对应的情感分析结果可 以包括：正向结果、中性结果以及负向结果。

[0108] 其中，预先训练好的图卷积神经网络是根据样本句子对应的隐藏状态特征，样本 句子对应的依赖关系图，样本句子中各个词对应的位置编码特征，以及样本句子中方面词 对应的真值情感分析结果训练得到的，真值情感分析结果包括：正向结果、中性结果以及负 向结果。

[0109] 示例性的，针对待进行方面级情感分析的目标句子：The food is good，but it certainly isn’t a relaxing place to go中的方面词food，可以得到该方面词对应的情 感分析结果为正向结果，而针对目标句子中的方面词place，可以得到该方面词对应的情感 分析结果为负向结果。

[0110] 本发明实施例提供的一种方面级情感分析方法，可以基于相似结构数据集，将与 待进行方面级情感分析的目标句子具有相似结构特征信息对应句子的信息，和目标句子以 及方面词进行特征聚合，得到目标句子对应的融合特征信息，以及得到根据目标句子中各 个词对应的相对位置编码特征和绝对位置编码特征所确定的位置编码特征，进一步基于目 标句子对应的隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图卷积神 经网络中，得到方面词对应的情感分析结果，避免了对情感词典依赖性较强而导致的情感 分析结果不准确的问题。且，在情感分析的过程中，不仅考虑待进行方面级情感分析的目标 句子的特征，以及目标句子中各个词对应的绝对位置编码特征，还考虑了具有相似结构特 征信息对应句子的信息以及目标句子中各个词对应的相对位置编码特征，使得融合特征能 够更准确的表征方面词在句子中的信息，进而提高了情感分析结果的准确性。

[0111] 作为本发明实施例一种可选的实施方式，参见图3，上述步骤S102基于相似结构数 据集，对目标句子以及方面词进行聚合特征处理，得到目标句子对应的融合特征信息的实 施方式，可以包括：

[0112] S1021，从相似结构数据集中，获取与目标句子具有相似结构特征信息的数据子 集。

[0113] 本发明实施例中，相似结构数据集中包含具有不同相似结构的数据子集，进而可 以使用Sim‑GraphSAGE(Similar Graph Sample And Aggregate，基于相似度的图的采样聚 合器)，从相似结构数据集中，获取与目标句子具有相似结构特征信息的数据子集。示例性 的，可以分别计算目标句子与不同数据子集中任一句子之间的相似度，进而从相似结构数 据集中，获取与目标句子具有相似结构特征信息的数据子集。

[0114] S1022，将数据子集中各句子，与目标句子以及方面词进行聚合特征处理，得到目 标句子对应的融合特征信息。

说 明 书 8/16 页

CN 113378545 B

[0115] 将所获取或者所确定的数据子集中各句子的信息，与目标句子以及方面词进行聚 合特征处理，得到目标句子对应的融合特征信息。

[0116] 示例性的，将所确定的数据子集中各句子作为邻居节点，目标句子表示为节点v， 进而将邻居节点的信息与目标句子以及方面词信息进行融合的过程可以是，采用如下表达 式实现聚合相邻k层邻居节点信息的过程：

[0117]

[0118] 其中， 表示对节点v采样的所有邻居节点的第k层特征表示，即将所有邻

居节点的信息聚合至节点v得到的第k层融合特征信息表示，Aggregate表示聚合函数，

表示邻居节点u的k‑1层特征表示，Sample(v)表示对节点v进行采样的k‑1层节点。实际应用 中，理想状态下，可以对每个节点(目标句子)利用其所有的邻居节点(数据子集中的句子) 进行信息聚合，这样得到的信息是无损的,但是出于对计算效率的考虑，可以采取随机采样 k个节点的方式，若节点的邻居节点数少于k,则采取有放回的抽样(获取)方法，直到采样出 k个节点为止，若节点的邻居节点数大于k，则采取无放回的抽样方式。

[0119] 具体的，可以采用如下表达式聚合节点v的k层邻居节点信息：

[0120]

[0121] 其中， 表示节点v的k层特征表示，δ表示激活函数，Qk表示第k层参数矩阵，

CONCAT表示拼接函数， 表示节点v的k‑1层特征表示， 表示对节点v采样的所

有邻居节点的第k层特征表示。

[0122] 本发明实施例中，可以从相似结构数据集中，选取与目标句子具有相似结构的数 据子集，进而利用所选取数据子集中的句子信息，对目标句子以及方面词进行聚合特征处 理，得到目标句子对应的融合特征信息，使得融合特征信息中聚合了与目标句子具有相似 结构的句子的信息，而不是只考虑目标句子的信息，进而利用该融合特征信息对方面词进 行情感分析，能够提高方面词情感分析的准确性。

[0123] 作为本发明实施例一种可选的实施方式，参见图4，上述步骤S104对目标句子以及 方面词进行预处理，得到目标句子对应的依赖关系图，以及该目标句子中各个词对应的位 置编码特征的实施方式，可以包括：

[0124] S1041，将目标句子以及方面词，输入预先训练的依存句法分析器中，得到目标句 子对应的句法依存树，以及目标句子中各个词对应的相对位置编码特征。

[0125] 其中，预先训练的依存句法分析器可以是根据第二预设数据集训练得到的，该第 二预设数据集可以是PTB(English Penn Tree‑bank，英文宾州树库)数据集等。

[0126] S1042，基于句法依存树，生成目标句子对应的依赖关系图。

[0127] 句法依存树能够体现句子中各个词之间的依赖关系，进而可以将句法依存树转换 成依赖关系图，该依赖关系图可以使用邻接矩阵A表示，其中，A中的元素Aij表示节点i到节 点j的单向关联关系，Aij＝1表示节点i与节点j之间具体关联关系，反之表示没有关联关系。

[0128] S1043，对目标句子中各个词对应的相对位置编码特征和绝对位置编码特征进行 位置编码融合，得到目标句子中各个词对应的位置编码特征。

说 明 书 9/16 页

CN 113378545 B

[0129] 示例性的，针对目标句子：[“这家”， “餐厅”， “牛排”， “不错”， “距离”， “地铁”， “也”， “很近”]，该目标句子中各个词对应的绝对位置编码特征可以表示为[0，1，2，3，4，5， 6，7]，以“不错”为中心位置，该目标句子中各个词对应的相对位置编码特征可以表示为[‑ 3，‑2，‑1，0，1，2，3，4]。其中， “牛排”和“不错”两个词，与“不错”和“距离”两个词在编码的距 离上是相等的，基于常识可以知晓，目标句子中“不错”是用于修饰“牛排”的，二者在语意上 的相关性应该大于“不错”与“距离”之间的相关性。

[0130] 本发明实施例中，对目标句子中各个词对应的相对位置编码特征和绝对位置编码 特征进行位置编码融合，具体的，可以使用如下表达式实现对目标句子中各个词对应的相 对位置编码特征和绝对位置编码特征的融合：

[0131] Pi＝δ(WaFi+WrRi+b)

[0132] 其中，Pi表示第i个节点(第i个词)的位置编码特征，δ表示激活函数，Wa和Wr分别表 示绝对位置编码特征和相对位置编码特征的权重，Fi和Ri分别表示第i个节点对应的绝对位 置编码特征和相对位置编码特征，b表示偏执项。

[0133] 本发明实施例中，对目标句子中各个词对应的相对位置编码特征和绝对位置编码 特征进行位置编码融合，得到目标句子中各个词对应的位置编码特征，使得位置编码特征 不仅考虑目标句子的绝对位置编码特征，还考虑了相对位置编码特征，进而利用该位置编 码特征对方面词进行情感分析，能够提高方面词情感分析的准确性。

[0134] 作为本发明实施例一种可选的实施方式，参见图5，上述步骤S105将隐藏状态特 征、依赖关系图以及位置编码特征，输入预先训练好的图卷积神经网络中，得到方面词对应 的情感分析结果的实施方式，可以包括：

[0135] S1051，基于隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图 卷积神经网络的卷积层进行特征提取，得到目标句子对应的特征信息。

[0136] 如图6所示，将目标句子s＝{w1,w2,...,wn}输入GraphSAGE模块(即Sim‑GraphSAGE 层)，得到目标句子对应的融合特征信息，融合特征信息输入BiLSTM(Bidirectional Long Short‑Term Memory，双向长短期记忆网络)中，得到双向长短期记忆网络输出的目标句子 对应的隐藏状态特征(即BiLSTM输出)。以及将目标句子以及方面词，输入依存句法分析器 中，得到目标句子对应的句法依存树，和目标句子中各个词对应的相对位置编码特征，进而 生成目标句子对应的依赖关系图，对目标句子中各个词对应的相对位置编码特征和绝对位 置编码特征进行位置编码融合，得到目标句子中各个词对应的位置编码特征。进一步的，将 目标句子对应的隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好的图卷积 神经网络的卷积层进行特征提取，得到目标句子对应的特征信息，最后输出方面词对应的 情感分析结果。其中，图6中W1表示聚合特征中的权重矩阵，W2表示图卷积神经网络中的权 重矩阵。

[0137] S1052，利用预先训练好的图卷积神经网络中的池化层，对目标句子对应的特征信 息进行池化处理，得到第一池化特征。

[0138] 将目标句子对应的特征信息，输入预先训练好的图卷积神经网络中的池化层进行 池化处理，得到第一池化特征。

[0139] S1053，利用预先训练好的图卷积神经网络中的全连接层，对第一池化特征进行概 率分析，得到方面词对应的情感分析结果。

说 明 书 10/16 页

CN 113378545 B

[0140] 将第一池化特征，输入预先训练好的图卷积神经网络中的全连接层，对第一池化 特征进行概率分析，得到方面词对应的情感分析结果。

[0141] 示例性的，针对待进行方面级情感分析的目标句子：The food is good，but it certainly isn’t a relaxing place to go中的方面词food，可以得到该方面词对应的情 感分析结果为正向结果，而针对目标句子中的方面词place，可以得到该方面词对应的情感 分析结果为负向结果。

[0142] 本发明实施例提供的一种方面级情感分析方法，可以基于相似结构数据集，将与 待进行方面级情感分析的目标句子具有相似结构特征信息对应句子的信息，和目标句子以 及方面词进行特征聚合，得到目标句子对应的融合特征信息，以及得到根据目标句子中各 个词对应的相对位置编码特征和绝对位置编码特征所确定的位置编码特征，进一步基于目 标句子对应的隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图卷积神 经网络中，得到方面词对应的情感分析结果，避免了对情感词典依赖性较强而导致的情感 分析结果不准确的问题。且，在情感分析的过程中，不仅考虑待进行方面级情感分析的目标 句子的特征，以及目标句子中各个词对应的绝对位置编码特征，还考虑了具有相似结构特 征信息对应句子的信息以及目标句子中各个词对应的相对位置编码特征，使得融合特征能 够更准确的表征方面词在句子中的信息，进而提高了情感分析结果的准确性。

[0143] 本发明实施例还提供了一种图卷积神经网络的训练方法，参见图7，该方法可以包 括：

[0144] S201，构建初始图卷积神经网络模型。

[0145] 其中，初始图卷积神经网络模型可以包括：卷积层，池化层和全连接层等。

[0146] S202，将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中 各个词对应的位置编码特征，输入图卷积神经网络的卷积层进行特征提取，得到样本句子 对应的特征信息。

[0147] 本发明实施例中，可以采用上述获取待进行方面级情感分析的目标句子，以及该 目标句子中的方面词，并基于相似结构数据集，对目标句子以及方面词进行聚合特征处理， 得到目标句子对应的融合特征信息，利用双向长短期记忆网络，对融合特征信息进行特征 转换，得到目标句子对应的隐藏状态特征，和对目标句子以及方面词进行预处理，得到目标 句子对应的依赖关系图，以及该目标句子中各个词对应的位置编码特征的实施方式，获取 样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，以及样本句子中各个词对应 的位置编码特征。具体的，样本句子的选取，可以是任何行业任意句子。

[0148] 进而，将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中 各个词对应的位置编码特征，输入图卷积神经网络的卷积层进行特征提取，得到样本句子 对应的特征信息。

[0149] S203，将样本句子对应的特征信息输入池化层，进行池化处理，得到第二池化特 征。

[0150] S204，将第二池化特征输入全连接层，得到样本句子中方面词对应的情感分析结 果。

[0151] 上述步骤S203‑S204的实现过程，可参照上述步骤S1052‑S1053的具体实现过程， 本发明实施例在此不再赘述。

说 明 书 11/16 页

CN 113378545 B

[0152] S205，基于样本句子中方面词对应的情感分析结果与真值情感分析结果的差异， 计算初始图卷积神经网络模型对应损失函数的参数值。

[0153] 作为本发明实施例一种可选的实施方式，损失函数的表达式可以为：

[0154]

[0155] 其中，L表示损失函数，c表示情感分析类别，X表示情感分析类别的数据，yic表示一 个指示变量，pic表示样本句子中方面词i的情感分析结果属于类别c的概率。yic可以取值为 0或1，具体的，在当前类别与方面词i的情感分析结果相同时为1，不同时为0。

[0156] S206，对损失函数进行最小化处理，确定初始图卷积神经网络模型中各模块的权 重参数。

[0157] S207，基于初始图卷积神经网络模型中各模块的权重参数，对初始图卷积神经网 络模型中的参数进行更新，训练得到图卷积神经网络模型。

[0158] 作为本发明实施例一种可选的实施方式，图卷积神经网络可以包含N层，N为大于1 的整数，如图6所示。相应的，在得到样本句子对应的特征信息之后，还可以包括：

[0159] 利用样本句子对应的隐藏状态特征，对样本句子对应的特征信息进行更新，并执 行将样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个词对应 的位置编码特征，输入图卷积神经网络的卷积层进行特征提取，得到样本句子对应的特征 信息的步骤。

[0160] 示例性的，对于N层图卷积神经网络，可以使用如下表达式对样本句子对应的特征 信息进行更新：

[0161]

[0162] 其中， 表示第N+1层节点i的隐藏状态特征，δ表示激活函数，T表示节点数，di

表示节点i的归一化常数项，Aij表示邻接矩阵，ON表示第N层参数矩阵， 表示第N层节点i

的卷积层状态，eN表示第N层偏移项。

[0163] 实际应用中，可以对邻接矩阵A采用对称归一化，其表达式可以表示为：

[0164]

[0165] 其中，Yi表示节点i在N层图卷积神经网络的图中的度数，其计算的表达式可以表 示为：

[0166]

[0167] 相应于上述方法实施例，本发明实施例提供了一种方面级情感分析装置，如图8所 示，该装置可以包括：

[0168] 数据获取模块301，用于获取待进行方面级情感分析的目标句子，以及该目标句子

说 明 书 12/16 页

CN 113378545 B

中的方面词。

[0169] 聚合特征模块302，用于基于相似结构数据集，对目标句子以及方面词进行聚合特 征处理，得到目标句子对应的融合特征信息；其中，相似结构数据集是预先对第一预设数据 集中各句子进行相似度计算得到的，包含具有不同相似结构的数据子集。

[0170] 特征转换模块303，用于利用双向长短期记忆网络，对融合特征信息进行特征转 换，得到目标句子对应的隐藏状态特征。

[0171] 位置编码模块304，用于对目标句子以及方面词进行预处理，得到目标句子对应的 依赖关系图，以及该目标句子中各个词对应的位置编码特征；其中，依赖关系图用于表征目 标句子中各个词之间的依赖关系，位置编码特征是：根据目标句子中各个词对应的相对位 置编码特征和绝对位置编码特征确定的。

[0172] 情感分析模块305，用于将隐藏状态特征、依赖关系图以及位置编码特征，输入预 先训练好的图卷积神经网络中，得到方面词对应的情感分析结果；其中，预先训练好的图卷 积神经网络是根据样本句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子 中各个词对应的位置编码特征，以及样本句子中方面词对应的真值情感分析结果训练得到 的，真值情感分析结果包括：正向结果、中性结果以及负向结果。

[0173] 本发明实施例提供的一种方面级情感分析装置，可以基于相似结构数据集，将与 待进行方面级情感分析的目标句子具有相似结构特征信息对应句子的信息，和目标句子以 及方面词进行特征聚合，得到目标句子对应的融合特征信息，以及得到根据目标句子中各 个词对应的相对位置编码特征和绝对位置编码特征所确定的位置编码特征，进一步基于目 标句子对应的隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图卷积神 经网络中，得到方面词对应的情感分析结果，避免了对情感词典依赖性较强而导致的情感 分析结果不准确的问题。且，在情感分析的过程中，不仅考虑待进行方面级情感分析的目标 句子的特征，以及目标句子中各个词对应的绝对位置编码特征，还考虑了具有相似结构特 征信息对应句子的信息以及目标句子中各个词对应的相对位置编码特征，使得融合特征能 够更准确的表征方面词在句子中的信息，进而提高了情感分析结果的准确性。

[0174] 可选地，上述聚合特征模块302，具体用于：

[0175] 从相似结构数据集中，获取与目标句子具有相似结构特征信息的数据子集。

[0176] 将数据子集中各句子，与目标句子以及方面词进行聚合特征处理，得到目标句子 对应的融合特征信息。

[0177] 可选地，上述位置编码模块304，具体用于：

[0178] 将目标句子以及方面词，输入预先训练的依存句法分析器中，得到目标句子对应 的句法依存树，以及目标句子中各个词对应的相对位置编码特征；预先训练的依存句法分 析器是根据第二预设数据集训练得到的。

[0179] 基于句法依存树，生成目标句子对应的依赖关系图。

[0180] 对目标句子中各个词对应的相对位置编码特征和绝对位置编码特征进行位置编 码融合，得到目标句子中各个词对应的位置编码特征。

[0181] 可选地，上述情感分析模块305，具体用于：

[0182] 基于隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图卷积神 经网络的卷积层进行特征提取，得到目标句子对应的特征信息。

说 明 书 13/16 页

CN 113378545 B

[0183] 利用预先训练好的图卷积神经网络中的池化层，对目标句子对应的特征信息进行 池化处理，得到第一池化特征。

[0184] 利用预先训练好的图卷积神经网络中的全连接层，对第一池化特征进行概率分 析，得到方面词对应的情感分析结果。

[0185] 可选地，上述装置，还包括：

[0186] 构建模块，用于构建初始图卷积神经网络模型，初始图卷积神经网络模型包括：卷 积层，池化层和全连接层。

[0187] 第一特征提取模块，用于将样本句子对应的隐藏状态特征，样本句子对应的依赖 关系图，样本句子中各个词对应的位置编码特征，输入图卷积神经网络的卷积层进行特征 提取，得到样本句子对应的特征信息。

[0188] 第二特征提取模块，用于将样本句子对应的特征信息输入池化层，进行池化处理， 得到第二池化特征。

[0189] 分析模块，用于将第二池化特征输入全连接层，得到样本句子中方面词对应的情 感分析结果。

[0190] 计算模块，用于基于样本句子中方面词对应的情感分析结果与真值情感分析结果 的差异，计算初始图卷积神经网络模型对应损失函数的参数值。

[0191] 确定模块，用于对损失函数进行最小化处理，确定初始图卷积神经网络模型中各 模块的权重参数。

[0192] 训练模块，用于基于初始图卷积神经网络模型中各模块的权重参数，对初始图卷 积神经网络模型中的参数进行更新，训练得到图卷积神经网络模型。

[0193] 可选地，图卷积神经网络包含N层，N为大于1的整数；上述装置还包括：

[0194] 更新模块，用于利用样本句子对应的隐藏状态特征，对样本句子对应的特征信息 进行更新，并触发第一特征提取模块执行将样本句子对应的隐藏状态特征，样本句子对应 的依赖关系图，样本句子中各个词对应的位置编码特征，输入图卷积神经网络的卷积层进 行特征提取，得到样本句子对应的特征信息。

[0195] 可选地，损失函数的表达式为：

[0196]

[0197] 其中，L表示损失函数，c表示情感分析类别，X表示情感分析类别的数据，yic表示一 个指示变量，pic表示样本句子中方面词i的情感分析结果属于类别c的概率。

[0198] 本发明实施例还提供了一种电子设备，如图9所示，包括处理器401、通信接口402、 存储器403和通信总线404，其中，处理器401，通信接口402，存储器403通过通信总线404完 成相互间的通信，

[0199] 存储器403，用于存放计算机程序；

[0200] 处理器401，用于执行存储器403上所存放的程序时，实现如下步骤：

[0201] 获取待进行方面级情感分析的目标句子，以及该目标句子中的方面词；

[0202] 基于相似结构数据集，对目标句子以及方面词进行聚合特征处理，得到目标句子 对应的融合特征信息；其中，相似结构数据集是预先对第一预设数据集中各句子进行相似

说 明 书 14/16 页

CN 113378545 B

度计算得到的，包含具有不同相似结构的数据子集；

[0203] 利用双向长短期记忆网络，对融合特征信息进行特征转换，得到目标句子对应的 隐藏状态特征；

[0204] 对目标句子以及方面词进行预处理，得到目标句子对应的依赖关系图，以及该目 标句子中各个词对应的位置编码特征；其中，依赖关系图用于表征目标句子中各个词之间 的依赖关系，位置编码特征是：根据目标句子中各个词对应的相对位置编码特征和绝对位 置编码特征确定的；

[0205] 将隐藏状态特征、依赖关系图以及位置编码特征，输入预先训练好的图卷积神经 网络中，得到方面词对应的情感分析结果；其中，预先训练好的图卷积神经网络是根据样本 句子对应的隐藏状态特征，样本句子对应的依赖关系图，样本句子中各个词对应的位置编 码特征，以及样本句子中方面词对应的真值情感分析结果训练得到的，真值情感分析结果 包括：正向结果、中性结果以及负向结果。

[0206] 本发明实施例提供的一种电子设备，可以基于相似结构数据集，将与待进行方面 级情感分析的目标句子具有相似结构特征信息对应句子的信息，和目标句子以及方面词进 行特征聚合，得到目标句子对应的融合特征信息，以及得到根据目标句子中各个词对应的 相对位置编码特征和绝对位置编码特征所确定的位置编码特征，进一步基于目标句子对应 的隐藏状态特征、依赖关系图以及位置编码特征，利用预先训练好的图卷积神经网络中，得 到方面词对应的情感分析结果，避免了对情感词典依赖性较强而导致的情感分析结果不准 确的问题。且，在情感分析的过程中，不仅考虑待进行方面级情感分析的目标句子的特征， 以及目标句子中各个词对应的绝对位置编码特征，还考虑了具有相似结构特征信息对应句 子的信息以及目标句子中各个词对应的相对位置编码特征，使得融合特征能够更准确的表 征方面词在句子中的信息，进而提高了情感分析结果的准确性。

[0207] 上述服务器设备提到的通信总线可以是PCI (Pe ri phe ra l Com ponen t Interconnect，外设部件互连标准) 总线或EISA(Extended Industry Standard Architecture，扩展工业标准结构)总线等。该通信总线可以分为地址总线、数据总线、控制 总线等。为便于表示，图中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总 线。

[0208] 通信接口用于上述电子设备与其他设备之间的通信。

[0209] 存储器可以包括RAM(Random Access Memory，随机存取存储器)，也可以包括NVM (Non‑Volatile Memory，非易失性存储器)，例如至少一个磁盘存储器。可选的，存储器还可 以是至少一个位于远离前述处理器的存储装置。

[0210] 上述的处理器可以是通用处理器，包括CPU(Central Processing Unit，中央处理 器)、NP(Network Processor，网络处理器)等；还可以是DSP(Digital Signal Processing， 数字信号处理器)、ASIC(Application Specific Integrated Circuit，专用集成电路)、 FPGA(Field‑Programmable Gate Array，现场可编程门阵列)或者其他可编程逻辑器件、分 立门或者晶体管逻辑器件、分立硬件组件。

[0211] 在本发明提供的又一实施例中，还提供了一种计算机可读存储介质，该计算机可 读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现上述任一一种方面 级情感分析方法的步骤，以达到相同的技术效果。

说 明 书 15/16 页

CN 113378545 B

[0212] 在本发明提供的又一实施例中，还提供了一种包含指令的计算机程序产品，当其 在计算机上运行时，使得计算机执行上述实施例中任一一种方面级情感分析方法的步骤， 以达到相同的技术效果。

[0213] 在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实 现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序 产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或 部分地产生按照本发明实施例所述的流程或功能。所述计算机可以是通用计算机、专用计 算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质 中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机 指令可以从一个网站站点、计算机、服务器或数据中心通过有线(例如同轴电缆、光纤、DSL (Digital Subscriber Line，数字用户线))或无线(例如红外、无线、微波等)方式向另一个 网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能 够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存 储设备。所述可用介质可以是磁性介质，(例如，软盘、硬盘、磁带)、光介质(例如，DVD

(Digital Versatile Disc，数字多功能光盘))、或者半导体介质(例如SSD(Solid State Disk，固态硬盘))等。

[0214] 需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实 体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存 在任何这种实际的关系或者顺序。而且，术语“包括”、 “包含”或者其任何其他变体意在涵盖 非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要 素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备 所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在 包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。

[0215] 本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部 分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于装置/ 电子设备实施例而言，由于其基本相似于方法实施例，所以描述的比较简单，相关之处参见

方法实施例的部分说明即可。

[0216] 以上所述仅为本发明的较佳实施例，并非用于限定本发明的保护范围。凡在本发 明的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本发明的保护范围内。

说 明 书 16/16 页

CN 113378545 B

说 明 书 附 图 1/5 页

CN 113378545 B

说 明 书 附 图 2/5 页

CN 113378545 B

说 明 书 附 图 3/5 页

CN 113378545 B

说 明 书 附 图 4/5 页

CN 113378545 B

说 明 书 附 图 5/5 页

CN 113378545 B