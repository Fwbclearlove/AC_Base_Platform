本发明公开了一种基于特征分布迁移的小样本图像特征学习方法及装置，主要包括以下步骤：

1. 对数据进行预处理，包括训练集和测试集。

2. 利用基类数据预训练嵌入模块fθ，得到特征空间。

3. 将训练集输入嵌入模块fθ，得到样本特征图，输入分布学习模块gφ，最小化损失函数，优化分布学习模块gφ。

4. 将新类数据分为支持集和查询集，计算每类的分布原型。

5. 计算基类数据中各类的类别概率，选取最大的前n个类别，将n个类别的分布与当前类别的分布合并，得到矫正后每类的分布原型。

6. 计算新类查询样本的预测概率。

该方法通过特征分布迁移，减少小样本图像分类中的原型偏差，提高分类效果。

---

[0075] 提供了一种基于特征分布迁移的小样本图像特征学习方法，包括以下阶段步骤：

[0076] S1、对数据进行预处理，分为训练集Dtrain和测试集Dtest；

[0077] 步骤S1包括：
   S11、将数据分为两部分，类别空间互斥；
   S12、对于C-way K-shot分类任务，从Dtrain中随机选出C个类别，每个类别中随机选出M个样本，构成任务Ti。

[0078] S2、利用基类数据预训练嵌入模块fθ，包含四个卷积块的嵌入模块对图像提取特征；

[0079] S3、将Dtrain输入到嵌入模块fθ，得到样本特征图，输入到分布学习模块gφ中，最小化损失函数，优化分布学习模块gφ；
   S31、计算每个类样本特征图的均值μc和方差σc；
   S32、调整嵌入模块fθ的参数；
   S33、计算每个样本类别概率；
   S34、利用交叉熵公式最小化损失函数。

[0080] S4、计算支持集的分布原型；
   S41、将新类数据分为支持集和查询集；
   S42、计算支持集的均值μc和方差σc；
   S43、计算每个类的分布原型；
   S44、计算类别方差。

[0081] S5、计算基类数据的类别概率，选取最大的前n个类别，合并分布得到矫正后的分布原型；
   S51、计算基类样本数据中各个类的类别概率；
   S52、选取最大的前n个类别；
   S53、合并分布，得到矫正后的分布原型。

[0082] S6、计算新类查询样本的预测概率，输出类别标签；
   S61、输入新类数据的查询集样本信息；
   S62、计算均值和方差；
   S63、计算预测概率，输出类别标签。

[0131] 提供了一种面向小样本图像的任务自适应度量学习装置，包括嵌入模块、分布学习模块、分布矫正模块和度量模块。

---

*请注意，由于原文中存在一些不清晰的表述和可能的重复，以上内容已经进行了相应的简化和整理。*