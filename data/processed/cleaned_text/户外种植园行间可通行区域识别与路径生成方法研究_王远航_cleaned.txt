户外种植园行间可通行区域识别与路径生成方法研究

王远航

工程硕士-控制工程领域

模式识别与智能控制

毕松 导师

李睿凡 校外导师

2022年5月20日

论文密级：公开

农业是国民经济的重要组成部分，农业生产稳定性是社会发展和基础保障的关键。本研究围绕轮式移动机器人在户外种植园行间的自主行驶技术，通过理论分析和地面地形检测方法，实现了行间地形的可通行区域识别。主要工作包括：分析轮式移动机器人不可通行路面的特点及参数，获得可通行地面的边界条件；设计适用于户外种植园行间场景的道路通行性评价指标和基于图像分割的行间道路区域分割方法；生成可通行区域约束下的导航路径。

关键词：户外种植园行间，轮式移动机器人平台，车辆通过性检测，地形可通行区域识别，图像语义分割与路径生成

Abstract

Agriculture is vital to the national economy, and the stability of agricultural production is fundamental to social development. This study focuses on the autonomous driving technology of wheeled mobile robots in outdoor plantation rows. It theoretically analyzes the passability of mobile robots and develops ground terrain detection methods for identifying passable areas between rows. Key contributions include: characterizing impassable surfaces and obtaining boundary conditions for passable terrain; designing indices for road passability in outdoor plantation rows and an image segmentation method for inter-row road area; and generating navigation paths under constraints of passable areas.

Keywords: outdoor plantation inter-row, wheeled mobile robot platform, vehicle passability detection, terrain passable area recognition, image semantic segmentation, path generation

---

4.2.2 越障能力分析

4.3 地形特征提取分析
   4.3.1 地形相对不变性证明及其相关假设
   4.3.2 坡度计算

4.4 可通行区域识别综合分析与决策
   4.4.1 深度数据处理
   4.4.2 负障碍通行性判别
   4.4.3 可通行区域识别

4.5 本章小结

第五章 行间道路识别与路径生成
   5.1 模型组网的构建
   5.2 模型训练
       5.2.1 目标数据来源与获取
       5.2.2 训练过程
       5.2.3 训练结果
       5.2.4 模型测试
   5.3 路径生成
   5.4 本章小结

第六章 总结与展望
   6.1 工作总结
   6.2 研究展望

参考文献
在学期间的研究成果
致谢

第一章 绪论
   1.1 课题背景及意义
   1.2 国内外户外种植园行间自主行驶的研究现状
       1.2.1 地形负障碍检测研究现状
       1.2.2 可通行道路识别研究现状
       1.2.3 路径生成研究现状
   1.3 本文的主要研究内容与组织结构

---

根据论文内容，以下是清洗后的片段：

第四章研究了轮式移动机器人平台行间地形感知及可通行区域的识别方法。分析了移动机器人完整的自相关限定阈值集合，研究了地形相对不变特征分析及提取方法，实现了负障碍可通行区域的识别。

第五章设计了行间道路识别与路径生成系统。本章基于图像分割方法设计了户外行间地面识别方法，研究了道路中可通行轨迹生成方法。完成了户外种植园行间地面分割模型的训练，测试结果表明所设计的模型具有良好的道路识别能力，并根据移动机器人行驶方向生成可通行路径。

第六章为总结与展望。本章针对户外种植园行间可通行区域识别与路径生成方法研究进行了分析和总结，指出本文系统设计最终达到的预期效果及评价，同样指出目前研究中存在的不足，并对这些不足的解决方法研究进行了展望。

第二章 可通行区域识别及路径生成相关理论

2.1 地形感知及可通行区域识别相关理论

2.1.1 车辆质心求解原理

2.1.2 深度数据处理原理

2.1.3 地形数据高程描述及坡度求解原理

2.1.4 顶起失效判定原理

2.2 道路分割与路径生成相关理论

2.2.1 基于深度学习的图像语义分割原理

以上内容已去除页眉、页脚、页码等非核心学术内容，保留了技术术语、数据、逻辑结构、公式和图表说明。

清洗后的内容如下：

语义分割系统的评价指标中最重要的是分割精度(Accuracy)，主要的精度指标有精确率、召回率和F1分数。精确率是用分类准确的正类数量与全部预测为正类的数量做比值，代表预测正类中实际正类的比例。召回率是用分类准确的正类数量与实际正类的数量做比值，代表实际正类中，被预测准确的正类的比例。F1分数可以平衡精确率和召回率两个指标，可以有效衡量模型整体分割性能。

路径生成原理：由于道路在相机水平拍摄的形状是远小近大的，所以对于路面来讲，图片中道路的信息呈现的是梯形的形状且符合大部分路面信息的形状规则，所以本文采用对道路信息的最小外接梯形提取导航线的方式进行路径生成。通过查找目标特征区域的最小外接梯形，依据梯形的位置及方向来定位目标物体的位置与姿态。通过道格拉斯-普克算法能够得到道路信息的最小外接梯形。该算法将曲线离散化由离散的点进行表示，并根据大体轮廓进行滤波处理。

户外种植园行间可通行区域识别与路径生成技术需求分析及方案设计：户外种植园是典型的非结构化环境，存在光照变化大、路面起伏等特点。标准的种植园对果树定植，形成具有一定规律性的种植模式。户外种植园定植后，形成的行间区域是种植园中可通行区域，为土质松软路面，因此行间地面存在坑洼不平的情况，对于轮式移动机器人通过性提出了挑战。本文主要解决的三个问题为：(1)轮式移动机器人的可通行路面的参数和参数范围。(2)符合行间实际环境的负障碍参数检测和提取方法。(3)户外环境下行间地面识别及可通行区域约束下的路径生成方法。

行间地形感知及可通行区域识别方案设计：本文首先对行间可通行区域识别与路径生成系统进行了行间地形感知及可通行区域识别的研究。其次将地形感知及可通行区域识别的研究分为整车通过性分析和地形识别两个部分进行研究。地形感知模块安装在车体的前部0.85m处，距离地面1.05m处，进行对地形深度数据的感知；陀螺仪安装在相机所在刚性平面，进行位姿校正。通过坐标系畸变校正和陀螺仪位姿校正得到真实的深度数据。进而对地形图像中的每个像素点所对应的距离数据进行坡度卷积计算得到坡度值，实现对地形的坡度特征提取。最后结合平台通过性综合限制参数，识别出相机视野内的可通行区域。

行间道路识别与路径生成方案设计：本文首先对户外种植园环境进行数据量为1060张的种植园行间图像数据采集。进而通过人眼对图像数据进行人工标注，标注出天空、树木、背景、道路四类特征，然后将所标注出的数据通过Labelme进行裁剪最终得到1060张图像数据的数据集。通过模型构建模块的设计，达到对这1060张人工标注的数据集方式的学习方式。根据户外种植园行间图像的特点构建图像语义分割模型并选择具有较高精度与环境抗干扰能力的深度卷积神经网络分割模型。模型训练过程包括下采样和上采样两个过程，共包含九个模块，最终使用分类函数完成了图像多分类任务，实现了将输入模型的图像分割成树木、天空、地面、背景四部分后输出的效果。最后根据图像处理原理，将四分类中的道路部分提取，并根据环境道路近大远小的特征确定道路最小外接梯形，最终确定沿行驶方向上的行驶路径。

清洗后的内容如下：

公式4-4表明，匀速行驶时的侧翻角度大于直线行驶中的侧翻角，因此当平台直线行驶或曲线匀速行驶时，平台向内侧翻的概率减小。公式4-5为车辆整体所受外力对车辆与斜坡的上侧轮胎接触点C的动力矩守恒分析下，规定顺时针为正。

在公式4-5中，1ZyF为车辆与斜坡的上侧轮胎接触点A处所受的正向力，根据对4-4式的推理过程，可进一步根据公式4-5得到式4-6所示的向心加速度与重力加速度的比值，即道路坡度角与车辆倾翻角之间的关系为：

1 0 1 Z y F B a b cos sin g h mg φ φ φ = − + 

在公式4-6中，弯道行驶发生侧翻的临界条件为1 0 Z F = 0且当φ角较小时，sinφ = cosφ，将此临界条件代入式4-6中可得式4-7的简化判别公式。

y 0 a b g h φ = + 

公式4-7中，0bh为侧翻阈值，可评估车辆抵抗侧翻的能力。

由于轮式移动机器人的结构较为复杂，因此需要在Adams系统中建立车辆的实际模型，根据表3-1可知前轴载重116.1kg，后轴载重108.8kg，利用Adams中view模块并结合第二章式2-9、2-10的求解，计算出平台满载和空载时的质心的切向距离与垂向高度。

车辆前翻模型与侧翻模型分析过程一致如图4-2(b)所示，同侧翻原理可得其侧翻阈值为0lh，其中0l为质心到车辆前轴方向的距离，L为车辆轴距。车辆前翻、侧翻角度如表4-1所示。

表4-1 车辆前翻、侧翻角度对应表

— 质心切向距离(mm) 质心垂向高度(mm) 倾翻角(°)

侧翻满载 0 329.38 l = 0 653.6 h = 26.7

侧翻空载 0 332.95 l = 0 459.09 h = 35.9

前翻满载 0 314.49 b = 0 653.6 h = 25.7

前翻空载 0 283.39 l = 0 459.09 h = 31.7

将表4-1得到的在满载和空载时的质心位置信息与极限倾翻角度参数和车辆自身的通过性限制参数的综合分析中可知，在纵向角度通过性方面，车辆自身的接近角和离去角构成的角度阈值为47.6°~90.0°，车辆前翻角度阈值为25.7°~31.7°，前翻角度阈值远小于接近角和离去角构成的角度阈值。所以车辆先发生前翻事故，后发生触头、拖尾事故，在现实情况下，当发生其中一个事故时，车辆立即停止行驶，因此在此纵向角度通过性判别中，首要考虑倾翻角度阈值作为车辆通过性检测的纵向角度阈值约束。侧向角度阈值约束选取本节的侧翻阈值26.7°~35.9°。

最终得到轮式移动机器人在户外种植园行间环境下行驶的纵向、侧向角度阈值约为25.7°~31.7°和26.7°~35.9°。

本文通过使用Basler ToF 3D相机采集地形深度信息，结合轮式移动机器人平台的速度和相机视野，计算了纵向误差占比约为1.77%，符合可接受误差范围，表明数据准确性较高。

由于户外种植园行间场景存在径向、切向畸变和位姿偏转，本文通过相机畸变校正和位姿校正过程，校正了深度数据误差。畸变校正采用棋盘格标定求取相机内参和畸变系数，坐标系转换实现了像素坐标系到相机坐标系的转换，位姿校正则通过陀螺仪数据实现了相机坐标系到世界坐标系的转换。

负障碍分割通过设定地面高度阈值，将低于该阈值的区域标记为负障碍区域。直行区域负障碍通行性判别流程中，首先计算负障碍区域的最大宽度，并与轮距比较，以判断车辆是否可通过。

最后，综合车辆通过性约束和地形分析，实现了地形可通行性识别。通过计算地形坡度，并与车辆倾翻角度阈值比较，识别出可通行区域。

第四章 行间地形感知及可通行区域识别

图4-26(a)(b)(c)(d)中，位姿角在负障碍边缘的近似值为20°，经统计X方向最大位姿角为28.4725°，平均位姿角为13.7273°；Y方向最大位姿角为27.5256°，平均位姿角为13.4971°。通过与移动机器人平台的侧翻角度阈值26.74°~35.69°，前翻角度阈值25.69°~31.68°对比，可知，此地形整体通过性良好，但存在使车辆发生倾翻事故的区域。

对于地形坡度特征，并结合国家车辆通过性评价标准[39]，本文规定在轮式移动机器人平台道路通过性评价的标准中倾翻角度的占比指标σ为70%，平均坡度指标τ为30%，最终指标大于0.2的道路为不可通过；大于0.1小于0.2的道路为通行困难道路。小于0.1的道路为通行性良好道路。根据4.1得出的车辆倾翻通过性限制角度，对地形坡度特征及其通过性评价如表4-4所示。

表4-4 地形坡度特征及其通过性评价

x向平均坡度|y向平均坡度|通过性评价|σ|τ
23.93°|14.14%|困难|0.1904|0.0406
30.81%|良好|0.0247|0.1141
22.57°|1.98%|良好|0.0247|0.1141

同样规定通行良好道路为当平均坡度不大于其阈值极限且倾翻角度占比低于20%的道路；通行困难道路为平均坡度大于其阈值极限30%且倾翻角度占比高于20%低于50%的道路；不可通行道路为平均坡度大于其阈值极限50%且倾翻角度占比高于50%的道路，道路状态评价，如表4-5所示。

表4-5 道路状态评价

—|良好道路|通行困难|不可通行
20%~50%|≤30%|20%~50%|>50%

当车辆满载或空载并检测到多负障碍的地形情况时，地形中存在远大于车辆发生倾翻的角度，但此地形平均坡度较小。从表4-4的数据上可以说明车辆倾斜角度相较于整体坡度而言占比较小，地形整体通过坡度分析，整体可通行，所以此多负障碍存在继续通行的可能，所以应进一步根据通过性检测中的越障能力约束条件对地形参数进行识别工作。

(2)结合倾翻角度阈值和通过性尺寸约束的可通行区域识别及结果对比

在4.1关于对轮式移动机器人平台顶起失效和跨越负障碍能力的研究中，得出本课题组的轮式移动机器人平台的侧翻阈值26.7°~35.7°，前翻角度阈值25.7°~31.7°，纵向的越障宽度¤¤限制阈值为357.0mm~424.7mm，最大深度ℎ¤的限制阈值为100.7mm~204.6mm。通过这两个纵向约束条件即可对整体坡度进行进一步的优化选取得到发生倾翻阈值角度时刻的深度极限。在侧向方向，通过对以相机为原点的坐标系内固定位置出车身底盘动点和地形动点的深度判断，进而得到侧向深度约束。如图4-27所示为通过坡度阈值识别并加以深度约束后并进行图像处理面积估计的可通行区域识别结果。

图4-27 综合约束下可通行区域识别效果

图4-27中蓝色部分为经角度阈值判别后的不可通行区域，绿色部分为经尺寸约束判别后的不可通行区域，红字为对应负障碍区域的编号及像素尺寸面积。未被绿色框圈起和颜色勾画的部分即为行间可通行区域。

图4-27中可以看出，对于此时刻的负障碍地形其坡度、尺寸均不满足通行的条件，从实际拍摄场景，每一个负障碍的边缘均有近90°的坡度变化，且负障碍内部坡度近似为0，负障碍的深度约为220mm。

与融合地面高差、地面坡度、地表粗糙度3种地形因素的2.5D栅格条件判别的可通行区域识别方法[11]相比，综合车辆通过性约束和地形特征结合预测的方法省略了高差和地表粗糙度的算法逻辑过程，提高了可通行区域的识别效率，得到了更精确的车辆实际运动需求的通行区域，充分发挥车辆良好的越障能力；与视觉、激光雷达、IMU融合的可通行区域识别方法相比[9][10][12][13]，本文方法逻辑更为简单，功能更易实现，对于农业成本需求上更为经济耐用且具有较高实用性。

4.5 本章小结

本章为解决轮式移动机器人平台在户外种植园行间行驶时，通过对平台通过性分析与地形特征提取的研究，得到了车辆在不同情况下的倾翻角度阈值约束，也得到了基于负障碍地形深度数据的地形坡度计算方法，将高程上各点的坡度值进行纵向、侧向方向的车辆位姿角转化，进而通过对纵向、侧向上的位姿角和倾翻角度阈值限制参数结合识别，得出识别后的可通行区域。并根据能够跨越的最大负障碍宽度、深度参数，得到关于最大越障尺寸的不可通行区域，实现轮式移动机器人平台缓慢行驶速度条件下的安全行驶。

第五章 行间道路识别与路径生成

第五章 行间道路识别与路径生成

针对户外种植园行间场景的道路识别与路径生成系统设计，本文通过构建一个针对户外种植园行间图像的图像语义分割模型，对行间环境信息进行道路识别，并设计了道路提取后的路径生成方式，实现对第四章处理后的可通行区域信号进行道路识别及其路径生成。

在模型选择上，深度卷积神经网络分割模型相比于传统分割模型具有更好的精度与环境抗干扰能力，所以本文选择深度卷积网络模型。在对各个深度卷积神经网络模型调研中，本文最终选择了U-Net网络作为户外种植园场景下的语义分割模型，U-Net网络更适用于小尺度数据集，能在较小数据集的情况下完成端到端训练，获得较好的分割效果。

常见的深度学习包有TensorFlow、Caffe和Theano。TensorFlow是有针对张量的命令格式，可安装在Linux、MacOS和Windows系统上。Caffe速度快，适合工业部署，提供了C++、MATLAB、Python接口，但其不够灵活，占用内存较多。Theano支持高性能的符号运算，可将操作指令快速转换成底层代码，提升了执行速度，同时，Theano提供了GPU的透明使用，大大提高了模型组网速度，具有API简单易懂、运行稳定等优点。

经过对各深度学习框架在户外种植园环境适应性方面的比较，最终选择TensorFlow深度学习框架作为开发工具，原因有以下几点：首先，TensorFlow支持各种CPU和GPU，可以保证计算的高效。其次，TensorFlow封装了很多高级API，为实验提供了有效的支撑，因为使用这些高级API可以通过几行代码实现复杂的模型构建和训练，并且该工具具备丰富详实的文档辅助，有助于快速上手学习，实现功能。此外，TensorFlow提供了多语言接口，具有较强的可扩展性，支持移动端、服务器等各种设备，具有较强灵活性。最后，TensorFlow集成了Keras，Keras是一个使用Python编写的专精于深度学习领域的框架，具有简洁优美、可移植性强的特点，目前在深度学习领域，Keras提供了最方便易行的模块和接口，在性能没有损耗的条件下，实现了程序的简化。通过TensorFlow，可以调用Keras代码，大大方便了模型组网和训练。

在道路路径生成上，本文采用对经过图像语义分割后的道路图像进行行驶方向和可通行区域双重约束的导航线拟合，实现行间可通行区域的路径生成。本文的整体设计方案如图5-1所示：

图5-1 道路识别与路径生成总体框架

5.1 模型组网的构建

本文对U-Net网络基于编码器-解码器结构，模型可分为九个模块，其中左侧四个模块为编码器下采样过程，右侧四个模块为解码器上采样过程。编码器利用下采样的特征图做融合，依靠不断的卷积和池化操作完成对图像深层特征的提取，解码器则依靠转置卷积操作来恢复原图像分辨率，实现最终的图像分割。U-Net网络模型结构如图5-2所示。

图5-2 U-Net网络模型结构

本文使用了U-Net网络结构组成，除经过四次下采样提取特征，四次上采样实现分辨率还原，本文在所有模块的卷积计算后加入了填充，保持了图像卷积后尺寸不变，这样做可以不会丢失图像边缘特征信息，提升分割效果[40]。

在下采样过程中，需要不断进行卷积和池化的操作，在卷积过程中，使用尺寸为3×3的卷积核，使用ReLU作为激活函数，在池化过程中，使用了2×2的池化窗口做最大池化。输入图像尺寸为224×224、深度为3，下采样过程中的网络模型见表5-1。

表5-1 下采样网络模型

输入层 输出尺寸 承接
input (224,224,3) —
conv2d1_1 (224,224,64) input
conv2d1_2 (224,224,64) conv2d1_1
max_pooling2d1 (112,112,64) conv2d1_2
conv2d2_1 (112,112,128) max_pooling2d1
conv2d2_2 (112,112,128) conv2d2_1
max_pooling2d2 (56,56,128) conv2d2_2
conv2d3_1 (56,56,256) max_pooling2d2
conv2d3_2 (56,56,256) conv2d3_1
max_pooling2d3 (28,28,256) conv2d3_2
conv2d4_1 (28,28,512) max_pooling2d3
conv2d4_2 (28,28,512) conv2d4_1
max_pooling2d4 (14,14,512) conv2d4_2

下采样结束后，进入中间的第五模块，第五模块是下采样和上采样的中间结合部分，只有两个卷积层。第五模块见表5-2。

表5-2 第五模块网络模型

输入层 输出尺寸 承接
conv2d5_1 (14,14,1024) max_pooling2d4
conv2d5_2 (14,14,1024) conv2d5_1

第五模块结束后，进行上采样操作，上采样网络构建见表5-3。

表5-3 上采样网络模型

输入层 输出尺寸 承接
conv2d_transpose_1 (28,28,512) conv2d5_2
concat1 (28,28,1024) conv2d_transpose_1
conv2d6_1 (28,28,512) concat1
conv2d6_2 (28,28,512) conv2d6_1
conv2d_transpose_2 (56,56,512) conv2d6_2
concat2 (56,56,768) conv2d_transpose_2
conv2d7_1 (56,56,256) concat2
conv2d7_2 (56,56,256) conv2d7_1
conv2d_transpose_3 (112,112,128) conv2d7_2
concat3 (112,112,256) conv2d_transpose_3
conv2d8_1 (112,112,128) concat3
conv2d8_2 (112,112,128) conv2d8_1
conv2d_transpose_4 (224,224,64) conv2d8_2
concat4 (224,224,128) conv2d_transpose_4
conv2d9_1 (224,224,64) concat4
conv2d9_2 (224,224,64) conv2d9_1
conv2d9_3 (224,224,4) conv2d9_2

下采样和上采样过程完成后，需要实现最终的图像输出，输出是对每个像素进行分类，需要得出每个像素属于各类别的概率，此时需要使用Softmax函数。ReLU函数是单节点激活函数，除此之外还有多节点激活函数，最常用的是Softmax函数，在U-Net网络中被用来完成多分类任务，Softmax的计算如公式5-1所示。

i V e S je = ∑

其中iS是一个向量，针对¤点，代表该点的回归概率，向量的各个分量代表各个类别的概率，各分量中最大的分量所对应的类别被视为该像素所属类别，j代表标注类别。可以看出Softmax工作的原理是先将输入值进行处理，将其当成幂指数求值，而后通过正则化转化为(0,1)区间上的概率，使各类别的概率总和为1，针对U-Net网络来说，就是每个像素会被给出属于各类别的概率，概率值均为正数，且总和为1，在各类别的概率中的最大值对应的类别将被视作该像素的类别，从此实现像素级分类。

5.2 模型训练

5.2.1 目标数据来源与获取

由于本文针对户外种植园行间场景，所以采集的图像都来自户外行间场地，包括种植园、公园和野外。通过差异化比对，筛选出其中的53张图像作为原始数据。确定原始数据后需要对其进行标注，标注使用的工具是图像标注软件labelme，见图5-3。标注首先要定义需要划分的类别，标注使用绳索的方式，将目标区域用绳索围成一个封闭区域，然后将此区域划入定义好的类别中，标注过程中要保证各区域之间不能有重叠，因为图像语义分割是像素级分类，每一个像素只能从属于一个固定类别，标注完成后保存至.json文件。

图5-3 图像标注操作界面

通过对图像类别的标注，可以自行设置相关类别的区域，通过后续训练、测试，对个人的感兴趣区域进行学习，为风格多异的图像类别的识别工作提供了便利，帮助我们标注图像，不需要我们在电脑中安装或复制大量的数据集。

模型训练的图像标签对格式有特定的要求，需要将.json文件进行转换，转换成模型可用的标签文件，数据集中数据共分成4类，0代表背景，1代表树木，2代表地面，3代表天空。标签制作完成后，包含原始图像和标注图像数据集初步构建完成，其中的一组数据见图5-4。

图5-4 标注过程图

图5-4(a)为原始图像，图5-4(b)中红色部分代表树木，黄色部分代表天空，绿色部分代表地面，未标注部分代表背景。其他样本数据库中的样本图像也都标记如图5-4(b)所示。图像采集过程中，由于图像采集设备不同，导致图像尺寸不一，U-Net网络要求输入的图片是正方形，所以要对数据集图像和标签进行裁剪操作，保证图像和模型的匹配。本文将图像裁剪成了224×224大小的图像，首先导入待裁剪的图像和标注好的标签，为防止裁剪超出图像范围，在图像和标签左上角、距图像右边和下边224像素的矩形里选择随机点，然后向右边和下边扩展224个像素，完成一次裁剪，重复20次完成对1张图像的裁剪，依次对53张图像重复操作。

裁剪的方式是对图像进行随机裁剪，裁剪数量是20，即对53张图像中的每张图像裁剪20次，共获得53×20=1060张224×224的图像作为预处理后的数据集，同时，对应的标签也执行相同操作，裁剪后的原始图像见图5-5(a)，预测图像见图5-5(b)。

图5-5 裁剪后原始图像和预测图像

5.2.2 训练过程

模型组网接下来是模型训练，训练的目的是获得针对本模型的数据集的模型参数，未来用这些参数进行预测。模型的输入图像尺寸为224×224，深度为3，为RGB三通道，共计1060张，其中训练集与测试集的比例为8:2，即训练集有848张，测试集有212张，图像场景包含了种植园、公园和野外。

模型训练时，每次训练的样本数设置为2，训练代数设置为50，训练时需要明确的五个参数，分别是模型指定训练数据、训练代数、训练数据组的数量、验证数据、验证数据组的数量。

模型在训练过程中需要使用损失函数，目的是更新模型参数让模型不断拟合实验数据，TensorFlow框架中有封装好的优化器可以完成梯度下降，本文选择使用Adam优化器进行梯度下降，本文将学习率设置为0.0001，模型配置如下：

model.compile(tf.keras.optimizers.Adam(learning_rate=0.0001),loss='sparse_categorical_crossentropy',metrics=['acc'])

Adam可以针对不同的模型参数使用动量和自适应学习率来加快收敛速度，具有计算效率高、内存需求小等优点，非常适合数据量较大或参数较多的场景。

5.2.3 训练结果

定义好网络和各相关参数后开始进行模型训练，由于训练集数量为1060×80%=848，由于每次训练的样本数设置为2，所以训练数据组的数量为848×20％=424。训练结束后绘制损失函数的变化和正确率的变化，损失函数的变化见图5-6。

图5-6 损失函数的变化

损失函数用来估量模型的预测值( )f x与真实值Y的不一致程度，它是一个非负实值函数，损失函数越小，模型的鲁棒性就越好。随着训练代数的增加，训练集和测试集的损失函数值不断降低，前期梯度下降较快，且训练集快于测试集，训练集在27代基本保持稳定，测试集在22代基本保持稳定。损失函数的下降趋势稳定于33附近

图5-8(a)、(c)、(e)展示了原始图像，而5-8(b)、(d)、(f)则是对应的预测图像。模型在户外种植园行间场景的图像语义分割上表现出较高的准确性，尤其是在树木和地面的分割上。然而，某些区域的分割仍存在不准确的情况。这些不准确的原因包括：图像在裁剪过程中信息的丢失，以及实验数据集数量较少且标注精度较低。

在路径生成方面，通过上采样和反卷积方法减少了图像信息丢失，使用Softmax函数完成像素多分类任务。道路信息提取后，采用道格拉斯-普克算法计算道路轮廓，并根据车辆行驶方向和可通行区域信号确定路径。

本章小结指出，基于U-Net网络的模型在户外种植园行间图像分割上具有较好的性能，尽管面对非结构化和恶劣的道路环境，系统的通过性检测和地形感知能力仍有待提升。研究展望中提到，需要进一步研究车辆通过性理论，并对自制数据集进行扩展和优化。

在总结与展望部分，文章强调了户外种植园行间道路识别与路径生成技术的重要性，并指出当前技术面临的挑战，如缺乏成熟的数据集和复杂的户外环境。文章提出，未来的研究应关注车辆通过性理论的深入探讨，以及融合更多传感器数据以提高系统的鲁棒性和准确性。

---

Peucker Algorithm, Monotonic Chains and Dichotomy[J]. ISPRS International Journal of Geo-Information, 2020, 9(4): 251-251.

研究成果：

一、发表论文

1. 毕松, 王远航, 李嘉伟, 刘蕾. 户外种植园行间可通行区域识别[J]. 计算机仿真

二、研究成果转化或应用

1. “绿茵先锋”全自动足球识别、抓取与投掷机器人团队设计—2020.10.30—ROBOCON 全国大学生机器人大赛三等奖
2. “投壶行觞”全自动箭矢抓取、精准投掷机器人团队设计—2020.07.27—ROBOCON 全国大学生机器人大赛三等奖

致谢：

感谢导师毕松教授及校外导师李睿凡先生，IFR 实验室的工作学习经历，对我的耐心培养，拓宽视野，夯实专业基础，丰富科研生活，树立严谨科研态度及正确三观。

感谢实验室同学们，大师兄张潞先生，二师兄王宇豪先生，以及师弟张国轩、韩奕非、隗朋峻、张东航、余鑫和李东先生的帮助与陪伴。

感谢父母及岳父岳母的养育与支持。

感谢未婚妻张静怡女士在研究生期间的鼓励和支持。

经过三年努力，从空白文档到四万余字的论文完成。感谢所有帮助和支持我的人，愿疫情早日退散，一切安好。

---