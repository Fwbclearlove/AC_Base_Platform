一种基于关系编码和层次注意力机制的图像段落描述方法，包括关系编码过程和层次注意力解码过程。关系编码过程输入区域特征V、区域位置B和区域类别O，通过空间关系编码器和语义关系编码器分别生成空间关系编码特征VP和语义关系编码特征Vs。层次注意力解码过程使用两个LSTM和一个层次注意力动态融合关系信息和物体区域信息，层次注意力由具有关系门和视觉门的层次注意力组成。空间关系编码器通过拼接其视觉特征和相对位置坐标嵌入表示来获取空间关系编码的特征向量。语义关系分类使用了多标签分类。

利用细粒度的空间和语义关系信息，在编码过程中，语义关系编码时我们通过训练有监督的语义分类器来学习和语义关系有关的先验知识。层次注意解码模块以Top-Down注意力网络为原型。层次注意力使用带有关系门和视觉门的层次注意力来动态的融合关系信息和物体区域特征，我们设计的关系门用于在两种关系信息(空间关系信息和语义关系信息)之间切换，设计的视觉门用于决定是否嵌入使用视觉信息，采用从粗粒度区域到细粒度的空间和语义关系的策略在段落生成过程中融合视觉信息。通过在斯坦福段落描述数据集(Stanford Benchmark Dataset)上的大量实验表明，本发明的方法在本领域的多个评价指 标上显著优于现有的方法。